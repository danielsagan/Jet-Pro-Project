clear
clc

global constraints;
x0 = [40.7377,1.1001,0.3043,0.0093,0,1.9672*10^(-6)]';
lb = [1 1.1 0 0 0 0];
ub = [55 1.7 8 1 0 0.1];
%options = optimoptions('fmincon','Algorithm','active-set','Display','iter');

%[x,fval,exitflag,output] = fmincon(@TSFCFun,x0,[],[],[],[],lb,ub,@mycon)

bestTSFC = 1000;

for i = 1:1
    
    x0 = [rand*(ub(1) - lb(1)) + lb(1), rand*(ub(2) - lb(2)) + lb(2), rand*(ub(3) - lb(3)) + lb(3), rand*(ub(4) - lb(4)) + lb(4), rand*(ub(5) - lb(5)) + lb(5), rand*(ub(6) - lb(6)) + lb(6)];
    
    options = optimoptions('fmincon','Display','iter', 'Algorithm', 'sqp');
    [x, fval, exitflag] = fmincon(@TSFCFun, x0, [],[],[],[],lb, ub, @mycon, options);
    %[x, fval, exitflag] = ga(@TSFCFun, 6, [],[],[],[],lb, ub, func);

    TSFC=fval;
    if ((TSFC < bestTSFC) && (TSFC > 0) && ((exitflag == 1) || (exitflag == 0)))

        bestTSFC = TSFC;
        optimalx = x;
        optimalx_xo = xo;

    end
    
end

function TSFC = TSFCFun(x)
TSFC = Jet_Engine_Analysis_Tool(x(1), x(2), x(3), x(4), x(5), x(6));
end

function [c,ceq] = mycon(x)
global constraints
c = [constraints(1), constraints(2), constraints(3), constraints(4)];
ceq = [constraints(5)];
end